"use strict";(self.webpackChunklightning_docs=self.webpackChunklightning_docs||[]).push([[541],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>h});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var u=r.createContext({}),l=function(e){var n=r.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},c=function(e){var n=l(e.components);return r.createElement(u.Provider,{value:n},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,u=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=l(t),m=o,h=p["".concat(u,".").concat(m)]||p[m]||d[m]||a;return t?r.createElement(h,i(i({ref:n},c),{},{components:t})):r.createElement(h,i({ref:n},c))}));function h(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,i=new Array(a);i[0]=m;var s={};for(var u in n)hasOwnProperty.call(n,u)&&(s[u]=n[u]);s.originalType=e,s[p]="string"==typeof e?e:o,i[1]=s;for(var l=2;l<a;l++)i[l]=t[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},8136:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var r=t(7462),o=(t(7294),t(3905));const a={},i="Custom",s={unversionedId:"RenderEngine/Textures/Custom",id:"RenderEngine/Textures/Custom",title:"Custom",description:"You can add and use your own reusable texture types by extending the lng.Texture class.",source:"@site/docs/RenderEngine/Textures/Custom.md",sourceDirName:"RenderEngine/Textures",slug:"/RenderEngine/Textures/Custom",permalink:"/lightning-docs/docs/RenderEngine/Textures/Custom",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/RenderEngine/Textures/Custom.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Canvas",permalink:"/lightning-docs/docs/RenderEngine/Textures/Canvas"},next:{title:"Image",permalink:"/lightning-docs/docs/RenderEngine/Textures/Image"}},u={},l=[{value:"Live Demo",id:"live-demo",level:2},{value:"Important Notes",id:"important-notes",level:2}],c={toc:l},p="wrapper";function d(e){let{components:n,...t}=e;return(0,o.kt)(p,(0,r.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"custom"},"Custom"),(0,o.kt)("p",null,"You can add and use your own reusable texture types by extending the ",(0,o.kt)("inlineCode",{parentName:"p"},"lng.Texture")," class."),(0,o.kt)("h2",{id:"live-demo"},"Live Demo"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"class MyNoiseTexture extends lng.Texture {\n\n    constructor(stage) {\n        super(stage);\n\n        this._w = 100;\n        this._h = 100;\n    }\n\n    get w() {\n        return this._w;\n    }\n\n    set w(l) {\n        this._w = l;\n        this._changed();\n    }\n\n    get h() {\n        return this._h;\n    }\n\n    set h(l) {\n        this._h = l;\n        this._changed();\n    }\n\n    _getLookupId() {\n        return '__noise_' + this._w + 'x' + this._h;\n    }\n\n    _getSourceLoader() {\n        // We need to scope these to protect them from modifications while loading (which may be async).\n        const w = this._w;\n        const h = this._h;\n\n        const gl = this.stage.gl;\n        return function(cb) {\n            const noise = new Uint8Array(w * h * 4);\n            for (let i = 0; i < w * h * 4; i+=4) {\n                const v = Math.round(Math.floor(Math.random() * 256));\n                noise[i] = v;\n                noise[i+1] = v;\n                noise[i+2] = v;\n                noise[i+3] = 255;\n            }\n\n            cb(null, {source: noise, w: w, h: h});\n        }\n    }\n}\n\nclass CustomTextureExample extends lng.Application {\n    static _template() {\n        return {\n            Example: {\n                texture: {type: MyNoiseTexture, w: 100, h: 200}\n            }\n        }\n    }\n}\n\nconst options = {stage: {w: window.innerWidth, h: window.innerHeight, useImageWorker: false}};\nconst App = new CustomTextureExample(options);\ndocument.body.appendChild(App.stage.getCanvas());\n")),(0,o.kt)("h2",{id:"important-notes"},"Important Notes"),(0,o.kt)("p",null,"Although ",(0,o.kt)("inlineCode",{parentName:"p"},"_getLookupId()")," is not required, it can be used to determine if the same texture was already generated and therefore can be reused. This saves memory and performance when using it from multiple views."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"_getSourceLoader()")," returns a function that is able to load the texture itself. The source may be an instance of any uploadable type (like ImageData, HTMLImageElement, HTMLCanvasElement, HTMLVideoElement, ImageBitmap or ArrayBufferView). It is important that you call the super method ",(0,o.kt)("inlineCode",{parentName:"p"},"_changed()")," to make sure that the texture is properly reloaded."))}d.isMDXComponent=!0}}]);